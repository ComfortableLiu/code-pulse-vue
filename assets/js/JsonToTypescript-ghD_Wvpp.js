import{d as _,r as i,c as x,a as c,b as l,i as A,w as u,v as S,F,f as d,o as N,h as g,t as T}from"./app-jDRaAFAG.js";import{C as h}from"./CodeEditor-DT31JOC6.js";const B=_({__name:"JsonToTypescript",setup($){const p=i(""),m=i(""),v=i(),f=i(""),y=r=>{f.value=r?.codeFrame||""},C=(r,e)=>{const o={},a=[];return Object.keys(r||[]).forEach(t=>{const s=t.split(/[^A-Za-z0-9]/).filter(Boolean).map((n,E)=>E>0?n.charAt(0).toUpperCase()+n.slice(1):n).join("")||"unknownName";if(typeof r[t]!="object"){o[s]=typeof r[t];return}if(o[s]=`I${s.charAt(0).toUpperCase()+s.slice(1)}`,Array.isArray(r[t]))if(r[t].length===0){o[s]="any[]";return}else if(typeof r[t][0]!="object"){o[s]=typeof r[t][0]+"[]";return}else o[s]+="[]";a.push({obj:Array.isArray(r[t])?r[t][0]:r[t],name:s})}),{list:a,str:`interface I${e.charAt(0).toUpperCase()+e.slice(1)} {
${Object.keys(o).map(t=>`  ${t}: ${o[t]}`).join(`
`)}
}

`}},w=()=>{let r="";const e=JSON.parse(p.value),o=[];for(o.push({obj:e,name:"root"});o.length;){const a=o.shift(),{list:t,str:s}=C(a.obj,a.name);r+=s,t.forEach(n=>o.push(n))}m.value=r,setTimeout(()=>v.value?.doFormatCode?.())};return(r,e)=>{const o=d("a-button"),a=d("a-alert");return N(),x(F,null,[e[5]||(e[5]=c("h1",null,"JSON转Typescript",-1)),l(h,{value:p.value,"onUpdate:value":e[1]||(e[1]=t=>p.value=t),language:"json","show-format":"",style:{"max-height":"300px"},onFormatError:y},{button:u(()=>[l(o,{class:"button",onClick:e[0]||(e[0]=t=>p.value="")},{default:u(()=>e[3]||(e[3]=[g("清空",-1)])),_:1,__:[3]}),l(o,{class:"button",type:"primary",onClick:w},{default:u(()=>e[4]||(e[4]=[g(" 转换 ",-1)])),_:1,__:[4]})]),_:1},8,["value"]),A(l(a,{type:"error"},{message:u(()=>[c("pre",null,T(f.value),1)]),_:1},512),[[S,f.value]]),e[6]||(e[6]=c("br",null,null,-1)),l(h,{ref_key:"tsEditorRef",ref:v,value:m.value,"onUpdate:value":e[2]||(e[2]=t=>m.value=t),language:"typescript","show-format":"",style:{"max-height":"300px"}},null,8,["value"])],64)}}});export{B as default};
