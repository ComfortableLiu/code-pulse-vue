import{g}from"./js-base64-BbY-I90a.js";import{b as k}from"./codemirror-Bke7cbJg.js";import{z as S,A as E,B as N,C as V,D as p,E as j,F as T}from"./@codemirror-Df9Z5W0R.js";import{f as z,p as A,N as F}from"./prettier-Cyqviw7S.js";import{d as b,r as u,o as U,w as W,f as L,S as w,U as x,V as D,W as G,X as d,Y as v,Z as _,_ as y,G as I,c as i,u as h}from"./@vue-BtnWELDn.js";import{_ as M}from"./page--encoding-Base64.vue-DpkTZSmI.js";import{A as Q,a as R}from"./@icon-park-CBDdjnVi.js";async function X(l,a="babel"){try{return z(l,{parser:a,tabWidth:2,singleQuote:!0,semi:!1,plugins:[A,F]})}catch(n){return console.error("格式化失败:",n),l}}const Y=b({__name:"CodeEditor",props:{value:{},language:{},style:{},containerStyle:{},showFormat:{type:Boolean}},emits:["update:value"],setup(l,{emit:a}){const n={javascript:{extension:V(),format:"babel"},json:{extension:T(),format:"json"},html:{extension:N(),format:"html"},css:{extension:E(),format:"css"},markdown:{extension:S(),format:"markdown"},text:{extension:void 0,format:"text"}},o=l,m=a,f=u(null);let e;const s=u(o.value);U(()=>{e=new p({state:j.create({doc:o.value||"",extensions:[k,n[o.language].extension,p.lineWrapping,p.updateListener.of(t=>{t.docChanged&&(s.value=t.state.doc.toString(),m("update:value",s.value))})].filter(t=>!!t)}),parent:f.value})}),W(()=>o.value,t=>{if(t!==s.value&&e){const r=e.state.update({changes:{from:0,to:e.state.doc.length,insert:t}});e.dispatch(r)}});const c=async()=>{if(e)try{const t=e.state.doc.toString(),r=await X(t);e.dispatch({changes:{from:0,to:t.length,insert:r}})}catch(t){console.error(t)}};return L(()=>{e&&e.destroy()}),(t,r)=>{const B=y("a-button");return v(),w("div",{class:"container",style:x(o.containerStyle)},[o.showFormat?(v(),D(B,{key:0,onClick:c},{default:_(()=>r[0]||(r[0]=[I(" 格式化 ")])),_:1,__:[0]})):G("",!0),d("div",{ref_key:"editorContainer",ref:f,class:"editor",style:x(o.style)},null,4)],4)}}}),C=M(Y,[["__scopeId","data-v-b0364b17"]]),Z={class:"container"},$={class:"operation-container"},q={class:"btn-group"},oe=b({__name:"Base64",setup(l){const a=u(""),n=u(""),o=()=>{a.value=g.encode(n.value)},m=()=>{n.value=g.decode(a.value)};return(f,e)=>{const s=y("a-button");return v(),w("div",Z,[e[2]||(e[2]=d("h1",null,"Base64编码",-1)),d("div",$,[i(C,{language:"text",value:n.value,"onUpdate:value":e[0]||(e[0]=c=>n.value=c)},null,8,["value"]),d("div",q,[i(s,{onClick:o},{default:_(()=>[i(h(Q),{theme:"two-tone",size:"24",fill:["#000","#fff"]})]),_:1}),i(s,{onClick:m},{default:_(()=>[i(h(R),{theme:"two-tone",size:"24",fill:["#000","#fff"]})]),_:1})]),i(C,{language:"text",value:a.value,"onUpdate:value":e[1]||(e[1]=c=>a.value=c)},null,8,["value"])])])}}});export{C,oe as _};
