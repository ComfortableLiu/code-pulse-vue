import{d as x,r as p,S as A,c as l,q as E,Z as u,A as w,_ as v,$ as S,G as d,V as $,a1 as N}from"./@vue-0fNgdcnR.js";import{C as _}from"./page--encoding-Base64.vue_vue_type_script_setup_true_lang.ts-BQqwvRYE.js";const T={class:"container"},V=x({__name:"JsonToTypescript",setup(U){const i=p(""),c=p(""),f=p(),m=p(""),h=e=>{m.value=e?.codeFrame||""},g=(e,o)=>{const s={},a=[];return Object.keys(e||[]).forEach(t=>{const r=t.split(/[^A-Za-z0-9]/).filter(Boolean).map((n,C)=>C>0?n.charAt(0).toUpperCase()+n.slice(1):n).join("")||"unknownName";if(typeof e[t]!="object"){s[r]=typeof e[t];return}if(s[r]=`I${r.charAt(0).toUpperCase()+r.slice(1)}`,Array.isArray(e[t]))if(e[t].length===0){s[r]="any[]";return}else if(typeof e[t][0]!="object"){s[r]=typeof e[t][0]+"[]";return}else s[r]+="[]";a.push({obj:Array.isArray(e[t])?e[t][0]:e[t],name:r})}),{list:a,str:`interface I${o.charAt(0).toUpperCase()+o.slice(1)} {
${Object.keys(s).map(t=>`  ${t}: ${s[t]}`).join(`
`)}
}

`}},y=()=>{let e="";const o=JSON.parse(i.value),s=[];for(s.push({obj:o,name:"root"});s.length;){const a=s.shift(),{list:t,str:r}=g(a.obj,a.name);e+=r,t.forEach(n=>s.push(n))}c.value=e,setTimeout(()=>f.value?.doFormatCode?.())};return(e,o)=>{const s=v("a-button"),a=v("a-alert");return S(),A("div",T,[l(_,{value:i.value,"onUpdate:value":o[1]||(o[1]=t=>i.value=t),language:"json","show-format":"",style:{"max-height":"300px"},"container-style":"margin-top: 24px",onFormatError:h},{button:u(()=>[l(s,{class:"button",onClick:o[0]||(o[0]=t=>i.value="")},{default:u(()=>o[3]||(o[3]=[d("清空")])),_:1,__:[3]}),l(s,{class:"button",type:"primary",onClick:y},{default:u(()=>o[4]||(o[4]=[d(" 转换 ")])),_:1,__:[4]})]),_:1},8,["value"]),E(l(a,{type:"error"},{message:u(()=>[$("pre",null,N(m.value),1)]),_:1},512),[[w,m.value]]),l(_,{ref_key:"tsEditorRef",ref:f,value:c.value,"onUpdate:value":o[2]||(o[2]=t=>c.value=t),language:"typescript","show-format":"",style:{"max-height":"300px"}},null,8,["value"])])}}});export{V as _};
