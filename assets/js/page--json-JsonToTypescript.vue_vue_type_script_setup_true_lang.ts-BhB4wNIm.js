import{d as E,r as i,S as w,V as c,c as l,q as x,_ as u,A as S,F as $,$ as d,U as F,G as g,a1 as N}from"./@vue-BkYI8UWU.js";import{C as y}from"./page--encoding-Base64.vue_vue_type_script_setup_true_lang.ts-DcWBJ1Xs.js";const B=E({__name:"JsonToTypescript",setup(T){const p=i(""),m=i(""),v=i(),f=i(""),h=r=>{f.value=r?.codeFrame||""},C=(r,e)=>{const s={},a=[];return Object.keys(r||[]).forEach(t=>{const o=t.split(/[^A-Za-z0-9]/).filter(Boolean).map((n,A)=>A>0?n.charAt(0).toUpperCase()+n.slice(1):n).join("")||"unknownName";if(typeof r[t]!="object"){s[o]=typeof r[t];return}if(s[o]=`I${o.charAt(0).toUpperCase()+o.slice(1)}`,Array.isArray(r[t]))if(r[t].length===0){s[o]="any[]";return}else if(typeof r[t][0]!="object"){s[o]=typeof r[t][0]+"[]";return}else s[o]+="[]";a.push({obj:Array.isArray(r[t])?r[t][0]:r[t],name:o})}),{list:a,str:`interface I${e.charAt(0).toUpperCase()+e.slice(1)} {
${Object.keys(s).map(t=>`  ${t}: ${s[t]}`).join(`
`)}
}

`}},_=()=>{let r="";const e=JSON.parse(p.value),s=[];for(s.push({obj:e,name:"root"});s.length;){const a=s.shift(),{list:t,str:o}=C(a.obj,a.name);r+=o,t.forEach(n=>s.push(n))}m.value=r,setTimeout(()=>v.value?.doFormatCode?.())};return(r,e)=>{const s=d("a-button"),a=d("a-alert");return F(),w($,null,[e[5]||(e[5]=c("h1",null,"JSON转Typescript",-1)),l(y,{value:p.value,"onUpdate:value":e[1]||(e[1]=t=>p.value=t),language:"json","show-format":"",style:{"max-height":"300px"},onFormatError:h},{button:u(()=>[l(s,{class:"button",onClick:e[0]||(e[0]=t=>p.value="")},{default:u(()=>e[3]||(e[3]=[g("清空")])),_:1,__:[3]}),l(s,{class:"button",type:"primary",onClick:_},{default:u(()=>e[4]||(e[4]=[g(" 转换 ")])),_:1,__:[4]})]),_:1},8,["value"]),x(l(a,{type:"error"},{message:u(()=>[c("pre",null,N(f.value),1)]),_:1},512),[[S,f.value]]),e[6]||(e[6]=c("br",null,null,-1)),l(y,{ref_key:"tsEditorRef",ref:v,value:m.value,"onUpdate:value":e[2]||(e[2]=t=>m.value=t),language:"typescript","show-format":"",style:{"max-height":"300px"}},null,8,["value"])],64)}}});export{B as _};
